<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#6a3b2d" />
    <title>PƒÅli Lessons (LMS)</title>
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" href="/icons/icon-192.png" type="image/png" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    <link rel="stylesheet" href="/css/styles.css" />
    <!-- PayPal SDK (replace YOUR_CLIENT_ID) -->
    <script
      src="https://www.paypal.com/sdk/js?client-id=AVpfmQ8DyyatFaAGQ3Jg58XtUt_2cJDr1leqcc_JI8LvKIR2N5WB_yljqCOTTCtvK1hFJ7Q9X0ojXsEC&currency=USD"
      defer
    ></script>
    <!-- EmailJS SDK -->
    <script
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
      defer
    ></script>
  </head>
  <body>
    <!-- ‚úÖ Topbar -->
    <header id="topbar" class="topbar">
      <div class="topbar-inner">
        <!-- Left: brand/logo -->
        <a class="brand" href="#/">
          <img src="/icons/icon-192.png" alt="Logo" class="logo" />
          <span class="brand-text">PƒÅli LMS</span>
        </a>

        <!-- Center: burger (mobile only) -->
        <button
          id="btnMenu"
          class="btn-icon burger"
          aria-label="Open menu"
          aria-expanded="false"
          aria-controls="navLinks"
        >
          ‚ò∞
        </button>

        <!-- Right: desktop nav / auth -->
        <nav class="nav-desktop" aria-label="Primary">
          <a class="nav-link" href="#/">Home</a>
          <a class="nav-link" href="#/courses">Courses</a>

          <!-- auth-only: login ·Äú·ÄØ·Äï·Ä∫·Äõ·ÄÑ·Ä∫·Äï·Ä≤ ·Äô·Äº·ÄÑ·Ä∫·Äô·Äö·Ä∫ -->
          <a class="nav-link auth-only" href="#/dashboard">Dashboard</a>
          <a class="nav-link auth-only" href="#/certs">Certificates</a>
          <a class="nav-link auth-only" href="#/transcripts">Transcripts</a>
          <a class="nav-link auth-only" href="#/settings">Settings</a>
          <a class="nav-link" href="#/profile">Profile</a>

          <!-- admin-only -->
          <a class="nav-link admin-only" href="#/admin">Admin</a>
        </nav>

        <div class="auth-actions">
          <button id="btnLogin" class="btn small">Login</button>
          <button id="btnLogout" class="btn small ghost hidden">Logout</button>
        </div>
      </div>
    </header>

    <!-- Mobile overlay panel (header ·Ä°·Äï·Äº·ÄÑ·Ä∫) -->
    <nav id="navLinks" class="mobile-panel" aria-label="Mobile Navigation">
      <a class="nav-link" href="#/">Home</a>
      <a class="nav-link" href="#/courses">Courses</a>

      <a class="nav-link auth-only" href="#/dashboard">Dashboard</a>
      <a class="nav-link auth-only" href="#/certs">Certificates</a>
      <a class="nav-link auth-only" href="#/transcripts">Transcripts</a>
      <a class="nav-link auth-only" href="#/settings">Settings</a>
      <a class="nav-link" href="#/profile">Profile</a>

      <a class="nav-link admin-only" href="#/admin">Admin</a>
      <hr />
      <button id="btnLogin_m" class="btn">Login</button>
      <button id="btnLogout_m" class="btn ghost hidden">Logout</button>
    </nav>

    <!-- ===== App content ===== -->
    <main id="app">
      <!-- Admin Console -->
      <section
        class="card maxw"
        id="adminConsole"
        style="max-width: 980px; margin-inline: auto"
      >
        <h2>Admin Console</h2>

        <details open class="blk">
          <summary class="h3">Add Course</summary>
          <form id="formCourse" class="grid-2">
            <label>Title <input name="title" required /></label>
            <label
              >Level
              <select name="level">
                <option value="0">Beginner</option>
                <option value="1">Intermediate</option>
                <option value="2">Advanced</option>
                <option value="3">Pro</option>
              </select>
            </label>
            <label
              >Credits <input type="number" name="credits" value="3"
            /></label>
            <label>Summary <textarea name="summary" rows="3"></textarea></label>
            <button class="btn" type="submit">Save Course</button>
          </form>
        </details>

        <details class="blk">
          <summary class="h3">Add Lesson</summary>
          <form id="formLesson" class="grid-2">
            <label
              >Course ID
              <input name="courseId" required placeholder="e.g. pali-beg-1"
            /></label>
            <label
              >Order <input type="number" name="order" min="1" required
            /></label>
            <label>Title <input name="title" required /></label>
            <label
              >Reading PDF URL
              <input name="readingUrl" placeholder="https://...pdf"
            /></label>
            <label>Pages <input type="number" name="pages" value="22" /></label>
            <label
              >Videos (comma)
              <input name="videos" placeholder="https://v1, https://v2"
            /></label>
            <button class="btn" type="submit">Save Lesson</button>
          </form>
        </details>

        <details class="blk">
          <summary class="h3">Add Quiz</summary>
          <form id="formQuiz" class="grid-2">
            <label>Course ID <input name="courseId" required /></label>
            <label>Lesson ID <input name="lessonId" required /></label>
            <label
              >Type
              <select name="type">
                <option value="mcq">Single choice</option>
                <option value="msq">Multiple choice</option>
                <option value="short">Short answer</option>
              </select>
            </label>
            <label
              >Question <textarea name="text" rows="3" required></textarea>
            </label>
            <label
              >Options (comma) <input name="options" placeholder="A, B, C, D"
            /></label>
            <button class="btn" type="submit">Save Quiz</button>
          </form>
        </details>

        <p class="muted">
          Tips: Save ·Äú·ÄØ·Äï·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äê·Ä¨·Äî·Ä≤·Ä∑ Home/Courses/Dashboard ·Äë·Ä≤·Äô·Äæ·Ä¨
          ·ÄÅ·Äª·ÄÄ·Ä∫·ÄÅ·Äª·ÄÑ·Ä∫·Ä∏·Äï·Ä±·Ä´·Ä∫·Äû·ÄΩ·Ä¨·Ä∏·Äï·Ä´·Äô·Äö·Ä∫·Åã
        </p>
      </section>

      <section
        class="card maxw"
        id="studentDash"
        style="max-width: 980px; margin-inline: auto"
      >
        <h2>Student Dashboard</h2>

        <div id="myCourses" class="list"></div>

        <h3>Certificates</h3>
        <div id="myCerts" class="list"></div>
      </section>
    </main>

    <!-- <main class="container">
      <div id="app"></div>
    </main> -->

    <footer class="footer">&copy; <span id="year"></span> PƒÅli Lessons</footer>

    <!-- Auth dialog -->
    <dialog id="authDlg" class="auth-modal">
      <form method="dialog" class="auth-card" id="authForm" novalidate>
        <button
          id="closeAuth"
          class="icon-btn close"
          type="button"
          aria-label="Close"
        >
          ‚úï
        </button>
        <div class="auth-header">
          <img src="/icons/icon-192.png" alt="logo" />
          <h3>Welcome back</h3>
          <p class="muted">Log in to continue your learning</p>
        </div>

        <div class="tabs">
          <button type="button" class="tab active" data-mode="login">
            Log in
          </button>
          <button type="button" class="tab" data-mode="signup">Sign up</button>
          <button type="button" class="tab" data-mode="forgot">Forgot</button>
        </div>

        <div class="fields">
          <label
            >Email
            <input id="authEmail" type="email" autocomplete="email" required />
          </label>

          <label class="pw">
            Password
            <input
              id="authPassword"
              type="password"
              autocomplete="current-password"
            />
            <button
              type="button"
              id="togglePw"
              class="icon-btn eye"
              aria-label="Show password"
            >
              üëÅ
            </button>
          </label>
        </div>

        <div class="actions">
          <button id="btnAuthSubmit" class="btn primary" type="submit">
            Continue
          </button>
          <button class="btn ghost" type="button" id="btnAuthCancel">
            Cancel
          </button>
        </div>

        <p id="authError" class="error hidden"></p>
      </form>
    </dialog>

    <!-- jsPDF (UMD) -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script>
      // window.jspdf.jsPDF ·ÄÄ·Ä≠·ÄØ ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äõ·Äô·Äö·Ä∫
      function demoMakePDF() {
        // const { jsPDF } = window.jspdf;
        const doc = new jsPDF("l", "pt", "a4");
        doc.text("Hello from jsPDF (UMD)!", 60, 80);
        doc.save("demo.pdf");
      }
      // demoMakePDF();
    </script>
    <script type="module" src="/js/firebase.js"></script>
    <script type="module" src="/js/app.js"></script>
  </body>
</html>
